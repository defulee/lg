#!/usr/local/bin/python3.7
# -*- coding:utf-8 -*-
import json
import os
import re


def write_head(file_name):
    fo = open(os.getcwd() + "/" + file_name + ".json", "w")
    context = """{
    "msg": "",
    "code": 0,
    "data": ["""
    fo.write(context + "\n")
    return fo


def write_end(fo):
    context = """\t],
    "count": 924,
    "is": true,
    "tip": "操作成功！"
}
    """
    fo.write(context + "\n")
    return fo


def write_records(fo, logs, is_last_logs=False):
    if len(logs) == 0:
        return
    idx = 0
    while idx < len(logs):
        data_dict = logs[idx].to_dict()
        fo.write("\t\t" + json.dumps(data_dict) + ",\n")
        idx = idx + 1

    # 写入最后一条记录
    data_dict = logs[len(logs) - 1].to_dict()
    if is_last_logs:
        fo.write("\t\t" + json.dumps(data_dict) + "\n")
    else:
        fo.write("\t\t" + json.dumps(data_dict) + ",\n")


def write_html(file, logs):
    """
     将替换的字符串写到一个新的文件中，然后将原文件删除，新文件改为原来文件的名字
     :param file: 文件路径
     :param logs: 待写入logs
     :return: None
     """
    template_file = os.path.dirname(__file__) + "/template.html"

    treetable_body = ""
    if len(logs) == 0:
        return
    for idx in range(len(logs)):
        data_tr = logs[idx].to_tr()
        treetable_body = treetable_body + data_tr

    with open(template_file, "r", encoding="utf-8") as f1, open(file, "w", encoding="utf-8") as f2:
        for line in f1:
            if "{{treetable_body}}" in line:
                line = line.replace("{{treetable_body}}", treetable_body)
            f2.write(line)


if __name__ == '__main__':
    s = """ [ManageWriteTradeOrderFlow]- 交易订单持久化SavedTO:{"@id":"@id:aefadeae-9e06-40a1-9cdb-c2d9c1503377","toCreateTradeOrderList":[],"toUpdateTradeOrderList":[{"@id":"@id:533891b6-a675-478c-b067-14cb73adca1b","id":476673,"status":"TO_AUDIT","needPayAmt":40000,"paidAmt":-273400,"onHandAmt":-273400,"discountAmt":0,"reduceDiscountAmt":0,"cashBackDiscountAmt":0,"shippingAmt":0,"skuTotalAmt":40000,"bargainAmt":313400,"refundAmt":0}],"toCreateTradeOrderLineList":[{"@id":"@id:510d7ee5-9c11-456b-8d3b-246bf348b1d5","id":568191,"code":"TOL202201200000194","outerCode":"2422533314539000242","groupOrderId":429443,"groupOrderCode":"HB2022011800000011","tradeOrderCode":"TRO20220117000001341","tradeOrderId":476673,"status":"TO_AUDIT","tradeOrderType":"NORMAL_SALE","businessType":"NORMAL","orderBusinessType":"NORMAL","tradeQty":2,"sku":{"@id":"@id:83c3adc4-de83-4059-8c05-673d468ebd8a","id":142003,"skuCode":"yjx005","name":"UATyjx计划库存","outerId":"4926652543088","freightClassification":"SMALL_FURNITURE","allowedPurchas":true,"checkMattressHeight":false,"checkDoor":false,"skuLength":1000.0,"skuWidth":1000.0,"skuHeight":800.0,"parcelPackageVolume":12.0,"parcelWoodenVolume":16.0,"isWoodenFrame":false,"goodsCategory":{"@id":"@id:599543ef-47e1-4361-8d9a-accbd2cb71e0","id":32003},"goodsCategoryName":"实木","itemOuterId":"629913673847"},"skuCode":"yjx005","skuName":"UATyjx计划库存","freightClassification":"SMALL_FURNITURE","volume":24.0,"canFulfillment":true,"allowPurchase":true,"consignee":"胡素素","consigneePhone":"15622277714","provinceId":110000,"province":"北京","cityId":110100,"city":"北京市","regionId":110101,"region":"东城区","streetId":11010100100,"street":"东华门街道","detailAddress":"昆明滇池国家旅游度假区万和花园F8栋603号房","deliveryMode":"LOGISTICS_UPSTAIRS","deliveryTimeType":"SOON","transfer":false,"packageMode":"NO_FRAME","floor":0,"deliverySupplierId":-1,"deliverySupplierName":"","transitLineId":-1,"transitLineName":"","pickUpSiteId":-1,"pickUpSiteName":"","carrierId":-1,"carrierName":"","carrier":{"@id":"@id:94be7d9a-5372-43e5-91f0-b53b9a3b350d","id":-1,"name":""},"warehouseId":-1,"warehouseName":"","occupyInventory":{"@id":"@id:1e5ad850-0612-468c-a01c-950f38812be0"},"inventoryType":"EMPTY","source":"MAN_MADE","channelPaidAmt":180700,"channelOrderPaidAmt":180700,"channelDepositPaidAmt":0,"skuAmt":20000,"discountAmt":0,"reduceDiscountAmt":0,"cashBackDiscountAmt":0,"needRefundAmt":454100,"needPayAmt":40000,"paidAmt":-273400,"onHandAmt":-273400,"shippingAmt":0,"bargainAmt":313400,"redLineAmt":20000,"orderedTime":1642423420000,"paidTime":1642423423000,"pendingAt":1642661259011,"exceptionType":"INVENTORY_ERROR","exceptionReason":"商品: UATyjx计划库存 在仓库: UAT_LJT_测试虚仓仓库 无库存可用; 商品: UATyjx计划库存 在仓库: UAT-黄氏虚仓 无库存可用; 商品: UATyjx计划库存 在仓库: 胶州正品仓-CS 无库存可用; 商品: UATyjx计划库存 在仓库: wangjw_UAT虚仓 无库存可用; 商品: UATyjx计划库存 在仓库: UAT_南京虚仓（售后测试） 无库存可用; 商品: UATyjx计划库存 在仓库: UAT_南京实仓-无虚仓（售后测试） 无库存可用","checklist":{"@id":"@id:839864bf-c33e-49b4-84d7-8c725a8fb5b0","orderLineId":-4926652543088},"parcelCodeList":["yjx111"],"parcelQty":2,"priority":"NORMAL","buyerName":"971804334qq","channelCode":"TAOBAO","channelName":"天猫渠道","shopCode":"FLAGSHIP_STORE","shopName":"源氏木语家居旗舰店","calcPlatformPrc":false,"storeId":2785,"storeCode":"FLAGSHIP_STORE","storeName":"源氏木语家居旗舰店","matchedTags":[{"@id":"@id:031115f8-1a96-424d-ac7f-b3950d05dfe1","id":24,"name":"7天内发货","type":"ORDER_FIELD","level":"ORDER"},{"@id":"@id:309262e0-e522-438a-971c-0afc72244723","id":1,"name":"免运费","type":"ORDER_FIELD","level":"ORDER"},{"@id":"@id:7e541336-d1c4-426e-a0fe-bb836cb47e10","id":7007,"name":"物流方式正确","type":"FREIGHT_CLASSIFY","level":"ORDER_LINE"},{"@id":"@id:56443b13-a7d6-45d3-9647-b7dc261db168","id":21,"name":"商品已变更","type":"LOGIC","level":"ORDER_LINE"},{"@id":"@id:2567d7d1-2d01-4e1b-98eb-6b8a5de7655d","id":2,"name":"挂起","type":"LOGIC","level":"ORDER_LINE"}],"matchedTagNames":["7天内发货","免运费","物流方式正确","商品已变更","挂起"],"channelOrderCode":"2422533314538000242","orderStatus":"TO_AUDIT","channelOrderStatus":"WAIT_DELIVERY","orderSource":"SYSTEM_MADE","payStatus":"PAID","salesmanNo":"100629","salesman":"顾佳悦","salesmanDepartment":"销售5中心","orderVolume":24.0,"sellerNote":"【售中山药/那年】【】【】【100629】销售5中心-顾佳悦（满天星）","paymentChannelDict":"ALIPAY","paymentTypeDict":"ONLINE","toCreateParcelLineList":[{"@id":"@id:2a93df69-dbbb-40d1-b864-d0cd79c488ef","groupOrderBO":{"@id":"@id:f397ec9d-ce7f-4215-8279-9cef92df16a1","id":429443,"containNoDeliveryLine":false},"tradeOrderBO":{"@id":"@id:f59a61de-f3ce-4531-9986-fb7b2488def8","id":476673,"refundAmt":0},"tradeOrderLineSO":{"@id":"@id:fa6043fd-4a78-4b80-ac0c-f7d03da64147","id":568191,"occupyInventorySuccess":false},"groupOrderCode":"HB2022011800000011","tradeOrderCode":"TRO20220117000001341","tradeOrderLineCode":"TOL202201200000194","parcelBO":{"@id":"@id:8a38c8b2-f954-410a-aeef-70680fcb7fb3","id":82003,"thingCode":"yjx111","thingName":"UATyjx111计划库存","thingWeight":20.0,"size":"规格111","materialclassification":{"@id":"@id:33cc886a-9efd-4f13-b89b-268538fa0237","id":3,"categoryCode":"CATE202108268173926","categoryName":"UAT松木"},"costPrice":200.0,"packagingLength":2000.0,"packagingWidth":2000.0,"packagingHeight":3000.0,"packagingVolume":12.0,"packageVolumeUnit":"CUBICMETERS","packagingWeight":22.0,"packageWeightUnit":"KILOGRAM","woodenFrameVolume":16.0,"purchaseCostPrice":10.0,"volume":8.0,"isWoodenFrame":false},"parcelCode":"yjx111","parcelName":"UATyjx111计划库存","bundleQty":1,"parcelQty":2,"parcelSnapshot":{"@id":"@id:1d83752b-a75b-4d10-90d8-ac5c4e8fc8a3","parcelId":82003,"parcelCode":"yjx111","parcelName":"UATyjx111计划库存","parcelSize":"规格111","parcelCost":10.0,"materialClassification":"UAT松木","packagingLength":2000.0,"packagingWidth":2000.0,"packagingHeight":3000.0,"packagingVolume":12.0,"packageVolumeUnit":"CUBICMETERS","packagingWeight":22.0,"packagingWeightUnit":"KILOGRAM"},"reserveRefundAmt":0,"reserveCompensateAmt":0,"reserveSpreadAmt":0,"channelPaidAmt":180700,"onHandAmt":-273400,"needRefundAmt":454100}],"occupyInventorySuccess":false}],"toUpdateTradeOrderLineList":[{"@id":"@id:96ade9e4-2e00-4262-b67f-437a96c16ef3","id":568151,"status":"CLOSED","deliverySupplierId":-1,"deliverySupplierName":"","transitLineId":-1,"transitLineName":"","pickUpSiteId":-1,"pickUpSiteName":"","carrierId":-1,"carrierName":"","carrier":{"@id":"@id:bcc69544-bd06-41cc-867e-5aa26a1f3014","id":-1,"name":""},"warehouseId":-1,"warehouseName":"","occupyInventory":{"@id":"@id:61da00ac-6198-48f4-8455-66893888edf5"},"inventoryType":"EMPTY","channelPaidAmt":0,"channelDepositPaidAmt":0,"discountAmt":0,"reduceDiscountAmt":0,"cashBackDiscountAmt":0,"needRefundAmt":0,"needPayAmt":0,"paidAmt":0,"onHandAmt":0,"shippingAmt":0,"bargainAmt":0,"exceptionType":"NO_ERROR","exceptionReason":"","matchedTags":[{"@id":"@id:705bec61-9536-4b3d-8d0c-50788f0cbae4","id":24,"name":"7天内发货","type":"ORDER_FIELD","level":"ORDER"},{"@id":"@id:02f3d8ee-d252-4ee4-a52e-86429a20bec4","id":1,"name":"免运费","type":"ORDER_FIELD","level":"ORDER"},{"@id":"@id:5e675842-7fb4-4996-baa3-f4e063f23526","id":22,"name":"大件家具","type":"FREIGHT_CLASSIFY","level":"ORDER_LINE"},{"@id":"@id:af63f772-57eb-4b7e-b439-9b3769cd362c","id":21,"name":"商品已变更","type":"LOGIC","level":"ORDER_LINE"}],"matchedTagNames":["7天内发货","免运费","大件家具","商品已变更"],"toUpdateParcelLineList":[{"@id":"@id:6a9bed6c-fd80-4f2b-b169-8a807cb315e8","id":288218,"channelPaidAmt":0,"onHandAmt":0,"needRefundAmt":0},{"@id":"@id:e87c8806-7004-4841-a2f3-645acc72cfc5","id":288219,"channelPaidAmt":0,"onHandAmt":0,"needRefundAmt":0}],"occupyInventorySuccess":false}],"toCreateGroupOrderList":[],"toUpdateGroupOrderList":[{"@id":"@id:9b0e1fec-3fa5-4606-b652-9ce2c6cd1711","id":429443,"skuTotalAmt":40000,"needPayAmount":40000,"paidAmount":-273400,"onHandAmount":-273400,"shippingAmount":0,"discountAmount":0,"reduceDiscountAmt":0,"cashBackDiscountAmt":0,"bargainAmount":313400,"needRefundAmt":454100,"needSupplyAmt":-454100,"promotionGift":"","promotion":{"@id":"@id:cb9bc601-4faf-4303-b446-36472b4b8690","discountAmtList":[],"hitBenefitList":[],"promotionGift":"","discountAmt":{"type":"global","value":0}},"exceptionType":"OTHER_ERROR","exceptionReason":"库存占用失败","promotionPerformType":"DEFAULT","promotionCalcMethod":"DEFAULT","redLineMessage":"","skuChanged":true,"freeShipping":true,"operationLogList":[{"@id":"@id:5d9e9ffb-19c6-4271-b9aa-f509e885d8a4","pid":429443,"source":"GROUP_ORDER","operatorId":4533,"operatorName":"吴新全","content":"保存","desc":"进行保存操作"},{"@id":"@id:64810320-a561-4255-bcef-066813cdf9ed","pid":429443,"source":"GROUP_ORDER","operatorId":4533,"operatorName":"吴新全","content":"添加商品行","desc":"增加 UATyjx计划库存*2"},{"@id":"@id:be8635f4-6d07-466f-8df2-8c4c4eabdd2b","pid":429443,"source":"GROUP_ORDER","operatorId":4533,"operatorName":"吴新全","content":"删除商品行","desc":"关闭 Y110Y01 组合书柜B款 0.8米+0.8米 顶柜【套装】*1"}],"tradeOrderLineList":[{"@id":"@id:2b25cbaf-634b-45a2-adfc-452141b5e9e2","id":568151,"status":"CLOSED","deliverySupplierId":-1,"deliverySupplierName":"","transitLineId":-1,"transitLineName":"","pickUpSiteId":-1,"pickUpSiteName":"","carrierId":-1,"carrierName":"","carrier":{"@id":"@id:0b8c9f80-d813-4ee4-a66a-cc419b0ddaf0","id":-1,"name":""},"warehouseId":-1,"warehouseName":"","occupyInventory":{"@id":"@id:d4ec998b-5f06-4d12-928d-751a78ab5a41"},"inventoryType":"EMPTY","channelPaidAmt":0,"channelDepositPaidAmt":0,"discountAmt":0,"reduceDiscountAmt":0,"cashBackDiscountAmt":0,"needRefundAmt":0,"needPayAmt":0,"paidAmt":0,"onHandAmt":0,"shippingAmt":0,"bargainAmt":0,"exceptionType":"NO_ERROR","exceptionReason":"","matchedTags":[{"@id":"@id:e272c616-758c-464c-8fb7-f9376ea3c58f","id":24,"name":"7天内发货","type":"ORDER_FIELD","level":"ORDER"},{"@id":"@id:76356392-7075-4381-951b-ce0cfbe86e1a","id":1,"name":"免运费","type":"ORDER_FIELD","level":"ORDER"},{"@id":"@id:e6fdf536-2e0b-4cbd-9496-e22b61ceb226","id":22,"name":"大件家具","type":"FREIGHT_CLASSIFY","level":"ORDER_LINE"},{"@id":"@id:f60840d4-2994-4cad-84ff-cd7b1509f20b","id":21,"name":"商品已变更","type":"LOGIC","level":"ORDER_LINE"}],"matchedTagNames":["7天内发货","免运费","大件家具","商品已变更"],"toUpdateParcelLineList":[{"@id":"@id:3aba8e83-7a41-4303-bbed-a43fe44b5286","id":288218,"channelPaidAmt":0,"onHandAmt":0,"needRefundAmt":0},{"@id":"@id:dd8790d3-4e01-4bbb-9774-ef44dc02916b","id":288219,"channelPaidAmt":0,"onHandAmt":0,"needRefundAmt":0}],"occupyInventorySuccess":false}],"toAddTradeOrderLineList":[{"@id":"@id:8bb0cd93-f2b5-4f5a-b1a6-cd0560439e24","id":568191,"code":"TOL202201200000194","outerCode":"2422533314539000242","groupOrderId":429443,"groupOrderCode":"HB2022011800000011","tradeOrderCode":"TRO20220117000001341","tradeOrderId":476673,"status":"TO_AUDIT","tradeOrderType":"NORMAL_SALE","businessType":"NORMAL","orderBusinessType":"NORMAL","tradeQty":2,"sku":{"@id":"@id:464e01b4-81cd-4fc1-8728-e0cb6ac7c725","id":142003,"skuCode":"yjx005","name":"UATyjx计划库存","outerId":"4926652543088","freightClassification":"SMALL_FURNITURE","allowedPurchas":true,"checkMattressHeight":false,"checkDoor":false,"skuLength":1000.0,"skuWidth":1000.0,"skuHeight":800.0,"parcelPackageVolume":12.0,"parcelWoodenVolume":16.0,"isWoodenFrame":false,"goodsCategory":{"@id":"@id:d5d49d07-1057-446d-be4a-4c19840eed66","id":32003},"goodsCategoryName":"实木","itemOuterId":"629913673847"},"skuCode":"yjx005","skuName":"UATyjx计划库存","freightClassification":"SMALL_FURNITURE","volume":24.0,"canFulfillment":true,"allowPurchase":true,"consignee":"胡素素","consigneePhone":"15622277714","provinceId":110000,"province":"北京","cityId":110100,"city":"北京市","regionId":110101,"region":"东城区","streetId":11010100100,"street":"东华门街道","detailAddress":"昆明滇池国家旅游度假区万和花园F8栋603号房","deliveryMode":"LOGISTICS_UPSTAIRS","deliveryTimeType":"SOON","transfer":false,"packageMode":"NO_FRAME","floor":0,"deliverySupplierId":-1,"deliverySupplierName":"","transitLineId":-1,"transitLineName":"","pickUpSiteId":-1,"pickUpSiteName":"","carrierId":-1,"carrierName":"","carrier":{"@id":"@id:d8f32018-0baf-4602-b0f2-637420421d4c","id":-1,"name":""},"warehouseId":-1,"warehouseName":"","occupyInventory":{"@id":"@id:bf7835d7-3eb6-49ad-a75e-76cf868dd07a"},"inventoryType":"EMPTY","source":"MAN_MADE","channelPaidAmt":180700,"channelOrderPaidAmt":180700,"channelDepositPaidAmt":0,"skuAmt":20000,"discountAmt":0,"reduceDiscountAmt":0,"cashBackDiscountAmt":0,"needRefundAmt":454100,"needPayAmt":40000,"paidAmt":-273400,"onHandAmt":-273400,"shippingAmt":0,"bargainAmt":313400,"redLineAmt":20000,"orderedTime":1642423420000,"paidTime":1642423423000,"pendingAt":1642661259011,"exceptionType":"INVENTORY_ERROR","exceptionReason":"商品: UATyjx计划库存 在仓库: UAT_LJT_测试虚仓仓库 无库存可用; 商品: UATyjx计划库存 在仓库: UAT-黄氏虚仓 无库存可用; 商品: UATyjx计划库存 在仓库: 胶州正品仓-CS 无库存可用; 商品: UATyjx计划库存 在仓库: wangjw_UAT虚仓 无库存可用; 商品: UATyjx计划库存 在仓库: UAT_南京虚仓（售后测试） 无库存可用; 商品: UATyjx计划库存 在仓库: UAT_南京实仓-无虚仓（售后测试） 无库存可用","checklist":{"@id":"@id:cd673f84-4025-4b18-af31-87dfba7c46d3","orderLineId":-4926652543088},"parcelCodeList":["yjx111"],"parcelQty":2,"priority":"NORMAL","buyerName":"971804334qq","channelCode":"TAOBAO","channelName":"天猫渠道","shopCode":"FLAGSHIP_STORE","shopName":"源氏木语家居旗舰店","calcPlatformPrc":false,"storeId":2785,"storeCode":"FLAGSHIP_STORE","storeName":"源氏木语家居旗舰店","matchedTags":[{"@id":"@id:a86efa42-f31a-4212-ad0a-b57d31aca05d","id":24,"name":"7天内发货","type":"ORDER_FIELD","level":"ORDER"},{"@id":"@id:69b0a157-00aa-4bb3-ab61-ec2c5049ed75","id":1,"name":"免运费","type":"ORDER_FIELD","level":"ORDER"},{"@id":"@id:d9fabace-cbdd-4f6d-a0c8-f17bf7e2813e","id":7007,"name":"物流方式正确","type":"FREIGHT_CLASSIFY","level":"ORDER_LINE"},{"@id":"@id:8b523fd9-0965-4d85-8624-983867fda12d","id":21,"name":"商品已变更","type":"LOGIC","level":"ORDER_LINE"},{"@id":"@id:669a4be0-f44a-4989-b0a3-1e1bf2e44837","id":2,"name":"挂起","type":"LOGIC","level":"ORDER_LINE"}],"matchedTagNames":["7天内发货","免运费","物流方式正确","商品已变更","挂起"],"channelOrderCode":"2422533314538000242","orderStatus":"TO_AUDIT","channelOrderStatus":"WAIT_DELIVERY","orderSource":"SYSTEM_MADE","payStatus":"PAID","salesmanNo":"100629","salesman":"顾佳悦","salesmanDepartment":"销售5中心","orderVolume":24.0,"sellerNote":"【售中山药/那年】【】【】【100629】销售5中心-顾佳悦（满天星）","paymentChannelDict":"ALIPAY","paymentTypeDict":"ONLINE","toCreateParcelLineList":[{"@id":"@id:858e3b31-2f6f-40d5-a24b-0c8364c27d5c","groupOrderBO":{"@id":"@id:69bf219e-7a0b-4e7e-b92b-126ecd732e57","id":429443,"containNoDeliveryLine":false},"tradeOrderBO":{"@id":"@id:50d4eeac-4dec-42a4-8b19-4e394ee2f40f","id":476673,"refundAmt":0},"tradeOrderLineSO":{"@id":"@id:2b37041f-c689-48d9-ba5c-e06aa6013df7","id":568191,"occupyInventorySuccess":false},"groupOrderCode":"HB2022011800000011","tradeOrderCode":"TRO20220117000001341","tradeOrderLineCode":"TOL202201200000194","parcelBO":{"@id":"@id:c6a10f37-7aab-4e81-935a-831ef5e144c9","id":82003,"thingCode":"yjx111","thingName":"UATyjx111计划库存","thingWeight":20.0,"size":"规格111","materialclassification":{"@id":"@id:dd4d3be0-a0de-484f-9fb6-bdd480e55711","id":3,"categoryCode":"CATE202108268173926","categoryName":"UAT松木"},"costPrice":200.0,"packagingLength":2000.0,"packagingWidth":2000.0,"packagingHeight":3000.0,"packagingVolume":12.0,"packageVolumeUnit":"CUBICMETERS","packagingWeight":22.0,"packageWeightUnit":"KILOGRAM","woodenFrameVolume":16.0,"purchaseCostPrice":10.0,"volume":8.0,"isWoodenFrame":false},"parcelCode":"yjx111","parcelName":"UATyjx111计划库存","bundleQty":1,"parcelQty":2,"parcelSnapshot":{"@id":"@id:1370a786-4e2b-4218-8914-e1cb033dbc8e","parcelId":82003,"parcelCode":"yjx111","parcelName":"UATyjx111计划库存","parcelSize":"规格111","parcelCost":10.0,"materialClassification":"UAT松木","packagingLength":2000.0,"packagingWidth":2000.0,"packagingHeight":3000.0,"packagingVolume":12.0,"packageVolumeUnit":"CUBICMETERS","packagingWeight":22.0,"packagingWeightUnit":"KILOGRAM"},"reserveRefundAmt":0,"reserveCompensateAmt":0,"reserveSpreadAmt":0,"channelPaidAmt":180700,"onHandAmt":-273400,"needRefundAmt":454100}],"occupyInventorySuccess":false}],"toUpdateTradeOrderList":[{"@id":"@id:6658b204-ad4a-4e9e-91ce-d84b36ed976a","id":476673,"status":"TO_AUDIT","needPayAmt":40000,"paidAmt":-273400,"onHandAmt":-273400,"discountAmt":0,"reduceDiscountAmt":0,"cashBackDiscountAmt":0,"shippingAmt":0,"skuTotalAmt":40000,"bargainAmt":313400,"refundAmt":0}],"containNoDeliveryLine":false}],"toUpdateOpenOrderList":[],"toCreateTradeParcelLineList":["@id:2a93df69-dbbb-40d1-b864-d0cd79c488ef"],"toUpdateTradeParcelLineList":["@id:6a9bed6c-fd80-4f2b-b169-8a807cb315e8","@id:e87c8806-7004-4841-a2f3-645acc72cfc5"],"toCreateOperationLogList":[{"@id":"@id:76c857fc-7080-44fa-9b38-6694dd86f14c","pid":429443,"source":"GROUP_ORDER","operatorId":4533,"operatorName":"吴新全","content":"保存","desc":"进行保存操作"},{"@id":"@id:5f479e4e-b586-4e01-af32-2e748c4708bd","pid":429443,"source":"GROUP_ORDER","operatorId":4533,"operatorName":"吴新全","content":"添加商品行","desc":"增加 UATyjx计划库存*2"},{"@id":"@id:97492c69-af03-42dc-a449-21c119c8348e","pid":429443,"source":"GROUP_ORDER","operatorId":4533,"operatorName":"吴新全","content":"删除商品行","desc":"关闭 Y110Y01 组合书柜B款 0.8米+0.8米 顶柜【套装】*1"}],"toCancelOccupyTradeLineList":[],"toOccupyTradeLineList":[]}, 合并单：xdsdfsajfas"""
    match = re.findall(r"\{.*(?=\})\}", s)
    j = json.loads(match[0]) if match else None
    print(j)
